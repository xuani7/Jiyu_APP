(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-collect-collect"],{"27b0":function(t,e,a){"use strict";(function(t){a("7a82");var n=a("dbce").default,l=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("b64b"),a("14d9");var c=l(a("2909")),i=l(a("c7eb")),r=l(a("1da1")),u=l(a("4b15")),o=l(a("7f22")),s=l(a("5a4e")),d=l(a("23f7")),f=(a("080b"),n(a("fe86"))),h={components:{navBar:u.default,Dynamic:o.default,loadMore:s.default,backTop:d.default},data:function(){return{backTop:{src:"../../static/back-top/top.png",scrollTop:0},scrollTop:0,title:"我的收藏",startX:0,list:[],status:"loading",page:1,flag:!1}},onPageScroll:function(t){this.backTop.scrollTop=t.scrollTop},onReachBottom:function(){var t=this;this.status="loading",setTimeout((function(){t.page=++t.page,t.getCollectArticle(0,t.page),t.flag?(t.status="down",t.flag=!1):t.status="normal"}),1e3)},onUnload:function(){this.list=[]},methods:{clickThumbsup:function(e){var a=this;return(0,r.default)((0,i.default)().mark((function n(){var l;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getClickArticle(e);case 2:l=n.sent,l.result.data[0]._id.user_article[0].isLike?(l.result.data[0]._id.user_article[0].isLike=!1,l.result.data[0].likeNumber-=1):(l.result.data[0]._id.user_article[0].isLike=!0,l.result.data[0].likeNumber+=1),t.callFunction({name:"setArticleById",data:l.result.data[0]}).then((function(t){console.log(t)}));case 5:case"end":return n.stop()}}),n)})))()},clickCollect:function(e){var a=this;return(0,r.default)((0,i.default)().mark((function n(){var l;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.getClickArticle(e);case 2:l=n.sent,l.result.data[0]._id.user_article[0].isCollect?(l.result.data[0]._id.user_article[0].isCollect=!1,l.result.data[0].collectNumber-=1):(l.result.data[0]._id.user_article[0].isCollect=!0,l.result.data[0].collectNumber+=1),t.callFunction({name:"setArticleById",data:l.result.data[0]}).then((function(t){console.log(t)}));case 5:case"end":return n.stop()}}),n)})))()},clickShare:function(t){var e=this;return(0,r.default)((0,i.default)().mark((function a(){var n,l,c;return(0,i.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={shareUrl:"https://bilibili.com/",shareTitle:"快看我发现了什么宝藏~",shareContent:"",shareImg:"http://qn.kemean.cn//upload/202004/18/1587189024467w6xj18b1.jpg",appId:"wxd0e0881530ee4444",appPath:"pages/home/home",appWebUrl:"https://bilibili.com/"},a.next=3,e.getClickArticle(t);case 3:l=a.sent,console.log(l),n.shareContent=l.result.data[0].content,n.shareImg=l.result.data[0].imgList[0],c=(0,f.default)(n,(function(t){console.log("分享成功回调",t),(0,f.closeShare)()})),setTimeout((function(){c.close()}),5e3);case 9:case"end":return a.stop()}}),a)})))()},getClickArticle:function(e){return t.callFunction({name:"getArticleById",data:{id:e}})},getCollectArticle:function(e,a){var n=this;t.callFunction({name:"getCollectArticle",data:{page:a}}).then((function(t){var e;0!==Object.keys(t.result.data).length?((e=n.list).push.apply(e,(0,c.default)(t.result.data)),n.flag=!0):Object.keys(t.result.data).length<5&&Object.keys(t.result.data).length>0?(n.flag=!1,n.status="normal"):(n.page-=1,n.flag=!1,n.status="normal")})),1===e&&uni.stopPullDownRefresh()},touchStart:function(t){1==t.touches.length&&(this.startX=t.touches[0].clientX)},touchEnd:function(t){if(1==t.changedTouches.length){var e=t.changedTouches[0].clientX,a=e-this.startX;Math.abs(a)}}},onLoad:function(){var t=this;this.$nextTick((function(){t.getCollectArticle(0,t.page)}))},onPullDownRefresh:function(){var t=this;this.$nextTick((function(){t.list=[],t.page=1,t.getCollectArticle(1,t.page)}))}};e.default=h}).call(this,a("a9ff")["default"])},"620d":function(t,e,a){"use strict";a.r(e);var n=a("27b0"),l=a.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(c);e["default"]=l.a},aa2d:function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return n}));var n={loadMore:a("5a4e").default},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchEnd.apply(void 0,arguments)}}},[a("navBar",{attrs:{title:t.title}}),t._l(t.list,(function(e,n){return a("Dynamic",{key:e._id._value,attrs:{imgList:e.imgList,avatar:e.user_id[0].avatarUrl,name:e.user_id[0].nickname?e.user_id[0].nickname:e.user_id[0].username,publishTime:e.publishTime,content:e.content,isLike:!!e._id.user_article[0].isLike&&e._id.user_article[0].isLike,isCollect:!!e._id.user_article[0].isCollect&&e._id.user_article[0].isCollect,likeNumber:e.likeNumber,collectNumber:e.collectNumber},on:{clickDynamic:function(e){arguments[0]=e=t.$handleEvent(e),t.clickDynamic(n)},clickThumbsup:function(a){arguments[0]=a=t.$handleEvent(a),t.clickThumbsup(e._id._value)},clickCollect:function(a){arguments[0]=a=t.$handleEvent(a),t.clickCollect(e._id._value)},clickShare:function(a){arguments[0]=a=t.$handleEvent(a),t.clickShare(e._id._value)}}})})),a("backTop",{attrs:{src:t.backTop.src,scrollTop:t.backTop.scrollTop}}),a("loadMore",{attrs:{mode:"loading1",color:"#686870",status:t.status,textSize:"12px",textColor:"#808080"}})],2)},c=[]},b656:function(t,e,a){"use strict";a.r(e);var n=a("aa2d"),l=a("620d");for(var c in l)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return l[t]}))}(c);var i=a("f0c5"),r=Object(i["a"])(l["default"],n["b"],n["c"],!1,null,"060775a2",null,!1,n["a"],void 0);e["default"]=r.exports}}]);